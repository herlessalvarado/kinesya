{"version":3,"sources":["assets/loginGirl.jpg","views/Login.tsx","network/axiosConfig.ts","network/UserService.ts","components/Copyright.tsx","components/Toast.tsx"],"names":["module","exports","theme","createMuiTheme","palette","primary","main","useStyles","makeStyles","createStyles","root","height","image","backgroundImage","LoginGirl","backgroundRepeat","backgroundColor","type","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","typography","button","background","form","width","marginTop","Login","classes","history","useHistory","useState","openToast","setOpenToast","toastMessage","setToastMessage","email","setEmail","password","setPassword","useEffect","getJWT","push","LogIn","logInUser","then","catch","err","response","data","message","container","component","className","item","xs","sm","md","Paper","elevation","square","variant","autoComplete","required","fullWidth","id","label","name","autoFocus","onChange","event","target","value","onKeyDown","key","open","handleClose","reason","onClick","href","headers","Authorization","handlerLogOutError","AuthOff","axios","defaults","baseURL","process","getNewToken","post","refresh_token","getRefreshToken","result","AuthOn","token","_getUserByToken","get","getUserByUsername","username","a","signUp","_updateUser","formData","put","res","updateUser","getUserByToken","getUsersByDistrict","district","params","location","getUsersByPaginator","page","limit","footer","padding","Copyright","color","align","Date","getFullYear","animation","keyframes","StyledAlert","styled","Alert","ToastSuccessful","props","ref","useRef","current","setTimeout","onClose","severity","ToastError"],"mappings":"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","file":"static/js/12.7a6b271b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loginGirl.73139f2f.jpg\";","import React, { useState, useEffect, ChangeEvent, useRef } from \"react\"\nimport LoginGirl from \"../assets/loginGirl.jpg\"\nimport {\n    createStyles,\n    makeStyles,\n    Theme,\n    createMuiTheme,\n    ThemeProvider,\n} from \"@material-ui/core/styles\"\nimport Grid from \"@material-ui/core/Grid\"\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\nimport Paper from \"@material-ui/core/Paper\"\nimport Typography from \"@material-ui/core/Typography\"\nimport TextField from \"@material-ui/core/TextField\"\nimport Button from \"@material-ui/core/Button\"\nimport Copyrigth from \"../components/Copyright\"\nimport { useHistory } from \"react-router-dom\"\nimport { getJWT } from \"../cache/CookieManager\"\nimport { AxiosError } from \"axios\"\nimport Toast from \"../components/Toast\"\nimport Link from \"@material-ui/core/Link\"\nimport { logInUser } from \"../network/UserService\"\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: \"#BF953F\",\n        },\n    },\n})\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            height: \"100vh\",\n        },\n        image: {\n            backgroundImage: `url(${LoginGirl})`,\n            backgroundRepeat: \"no-repeat\",\n            backgroundColor:\n                theme.palette.type === \"light\" ? theme.palette.grey[50] : theme.palette.grey[900],\n            backgroundSize: \"cover\",\n            backgroundPosition: \"center\",\n        },\n        paper: {\n            margin: theme.spacing(8, 4),\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n        },\n        typography: {\n            margin: theme.spacing(2),\n        },\n        button: {\n            margin: theme.spacing(3, 0, 2),\n            background: \"linear-gradient(90deg,#e8d3af,#cda777)!important\",\n        },\n        form: {\n            width: \"100%\",\n            marginTop: theme.spacing(1),\n        },\n    })\n)\n\nexport default function Login() {\n    const classes = useStyles()\n    const history = useHistory()\n    const [openToast, setOpenToast] = useState(false)\n    const [toastMessage, setToastMessage] = useState(\"\")\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n\n    const handCloseToast = (event?: React.SyntheticEvent, reason?: string) => {\n        if (reason === \"clickaway\") {\n            return\n        }\n        setOpenToast(false)\n    }\n    const cleanFields = () => {\n        setEmail(\"\")\n        setPassword(\"\")\n    }\n    const handleEmail = (event: ChangeEvent<HTMLInputElement>) => {\n        setEmail(event.target.value)\n    }\n\n    const handlePassword = (event: ChangeEvent<HTMLInputElement>) => {\n        setPassword(event.target.value)\n    }\n\n    useEffect(() => {\n        if (!!getJWT()) history.push(\"/dashboard\")\n    })\n\n    const LogIn = (email: string, password: string) => {\n        logInUser(email, password)\n            .then(() => {\n                cleanFields()\n            })\n            .catch((err: AxiosError) => {\n                setToastMessage(err.response?.data?.message)\n                setOpenToast(true)\n            })\n    }\n\n    return (\n        <Grid container component=\"main\" className={classes.root}>\n            <CssBaseline>\n                <ThemeProvider theme={theme}>\n                    <Grid item xs={false} sm={4} md={7} className={classes.image} />\n                    <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n                        <div className={classes.paper}>\n                            <Typography component=\"h1\" variant=\"h5\" className={classes.typography}>\n                                Kinesya\n                            </Typography>\n                            <form className={classes.form} autoComplete=\"off\">\n                                <TextField\n                                    variant=\"outlined\"\n                                    margin=\"normal\"\n                                    required\n                                    fullWidth\n                                    id=\"email\"\n                                    label=\"Correo electrónico\"\n                                    name=\"email\"\n                                    autoComplete=\"email\"\n                                    autoFocus\n                                    onChange={handleEmail}\n                                />\n                                <TextField\n                                    variant=\"outlined\"\n                                    margin=\"normal\"\n                                    onKeyDown={(event) => {\n                                        if (event.key === \"Enter\") LogIn(email, password)\n                                    }}\n                                    required\n                                    fullWidth\n                                    id=\"password\"\n                                    type=\"password\"\n                                    label=\"Contraseña\"\n                                    name=\"password\"\n                                    onChange={handlePassword}\n                                />\n                            </form>\n                            <Toast\n                                key=\"alert\"\n                                open={openToast}\n                                handleClose={handCloseToast}\n                                message={toastMessage}\n                            ></Toast>\n                            <Button\n                                fullWidth\n                                variant=\"contained\"\n                                className={classes.button}\n                                onClick={() => {\n                                    LogIn(email, password)\n                                }}\n                            >\n                                Iniciar sesión\n                            </Button>\n                            <Grid container>\n                                <Grid item>\n                                    <Link href=\"/register\" variant=\"body2\">\n                                        {\"¿No tienes cuenta? Regístrate\"}\n                                    </Link>\n                                </Grid>\n                            </Grid>\n                            <Copyrigth></Copyrigth>\n                        </div>\n                    </Grid>\n                </ThemeProvider>\n            </CssBaseline>\n        </Grid>\n    )\n}\n","import { getJWT, AuthOff } from \"../cache/CookieManager\"\nimport { AxiosError } from \"axios\"\n\nexport default () => ({ headers: { Authorization: `Bearer ${getJWT()}` } })\nexport function handlerLogOutError(err: AxiosError) {\n    AuthOff()\n    return err\n}\nexport function handlerAuthError() {}\n","import axios from \"axios\"\nimport headers, { handlerLogOutError } from \"./axiosConfig\"\nimport { getRefreshToken, AuthOn } from \"../cache/CookieManager\"\naxios.defaults.baseURL = process.env.REACT_APP_API_URL\nexport const getNewToken = () => {\n    return axios\n        .post(\"/users/token\", { refresh_token: getRefreshToken() })\n        .then((result) => {\n            AuthOn(result.data.token, result.data.refresh_token)\n            return result\n        })\n        .catch(handlerLogOutError)\n}\n\nexport const _getUserByToken = () => {\n    return axios.get(\"/users/me\", headers()).then((response) => {\n        return response.data\n    })\n}\n\nexport async function getUsers() {\n    const res = await axios.get(\"/users\")\n    return res.data\n}\n\nexport async function getUserByUsername(username: string) {\n    return axios.get(\"/users/\" + username).then((response) => {\n        return response.data\n    })\n}\n\nexport async function logInUser(email: string, password: string) {\n    return axios.post(\"/users/login\", { email, password }).then((result) => {\n        AuthOn(result.data.token, result.data.refresh_token)\n        return result.data\n    })\n}\n\nexport async function signUp(username: string, email: string, password: string): Promise<string> {\n    return axios.post(\"/users\", { username, email, password }).then((result) => {\n        AuthOn(result.data.token, result.data.refresh_token)\n        return result.data\n    })\n}\n\nexport async function _updateUser(formData: any) {\n    return axios.put(\"/users\", formData, headers()).then((res) => res.data.message)\n}\nexport async function updateUser(formData: any) {\n    return _updateUser(formData).catch(() => getNewToken().then(() => _updateUser(formData)))\n}\n\nexport async function getUserByToken() {\n    return _getUserByToken().catch(() => getNewToken().then(() => _getUserByToken()))\n}\n\nexport async function getUsersByDistrict(district: string): Promise<any> {\n    return axios\n        .get(\"/users\", {\n            params: {\n                location: district,\n            },\n        })\n        .then((response) => {\n            return response.data\n        })\n}\n\nexport async function getUsersByPaginator(page: Number, limit: Number) {\n    return axios\n        .get(\"/users\", {\n            params: {\n                page: page,\n                limit: limit,\n            },\n        })\n        .then((response) => {\n            return response.data\n        })\n}\n","import React from \"react\"\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Link from \"@material-ui/core/Link\"\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        footer: {\n            padding: theme.spacing(6, 0),\n        },\n    })\n)\n\nexport default function Copyright() {\n    const classes = useStyles()\n\n    return (\n        <footer className={classes.footer}>\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n                {\"Copyright © \"}\n                <Link color=\"inherit\" href=\"/\">\n                    Kinesya\n                </Link>{\" \"}\n                {new Date().getFullYear()}\n                {\".\"}\n            </Typography>\n        </footer>\n    )\n}\n","import React, { FC, useRef, useEffect } from \"react\"\nimport Alert from \"@material-ui/lab/Alert\"\nimport { makeStyles, Theme } from \"@material-ui/core/styles\"\nimport styled, { keyframes } from \"styled-components\"\n\ninterface ToastProps {\n    message?: string\n    open: boolean\n    handleClose: () => void\n}\nconst useStyles = makeStyles((theme: Theme) => ({\n    root: {\n        width: \"100%\",\n        \"& > * + *\": {\n            marginTop: theme.spacing(2),\n        },\n    },\n}))\n\nconst animation = keyframes`\n    from {\n        transform: scale(0)\n    }\n    to {\n        transform : scale(1) \n    } \n`\n\nconst StyledAlert = styled(Alert)`\n    animation: ${animation} 0.2s linear;\n    position: fixed;\n    top: 24px;\n    left: auto;\n    right: 24px;\n` as typeof Alert\n\nconst ToastError: FC<ToastProps> = function CustomizedSnackbars(props: ToastProps) {\n    const classes = useStyles()\n    const ref = useRef(null)\n    useEffect(() => {\n        if (ref.current !== null) {\n            setTimeout(props.handleClose, 6000)\n        }\n    })\n\n    return (\n        <div className={classes.root}>\n            {props.open && (\n                <StyledAlert ref={ref} onClose={props.handleClose} severity=\"error\">\n                    {props.message}\n                </StyledAlert>\n            )}\n        </div>\n    )\n}\nexport const ToastSuccessful: FC<ToastProps> = function CustomizedSnackbars(props: ToastProps) {\n    const classes = useStyles()\n    const ref = useRef(null)\n    useEffect(() => {\n        if (ref.current !== null) {\n            setTimeout(props.handleClose, 6000)\n        }\n    })\n    return (\n        <div className={classes.root}>\n            {props.open && (\n                <StyledAlert ref={ref} onClose={props.handleClose} severity=\"success\">\n                    {props.message}\n                </StyledAlert>\n            )}\n        </div>\n    )\n}\nexport default ToastError\n"],"sourceRoot":""}